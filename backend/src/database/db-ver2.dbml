//////////////////////////////////////////////////////////////
// ðŸ”¹ Báº¢NG QUáº¢N LÃ NGÆ¯á»œI DÃ™NG & PHÃ‚N QUYá»€N
//////////////////////////////////////////////////////////////
Table roles {
  id int [pk, increment]                        
  name varchar                                  // TÃªn vai trÃ² (Admin, CÆ° dÃ¢n, Thu ngÃ¢n,...)
  description text                              // MÃ´ táº£ chá»©c nÄƒng / quyá»n háº¡n
}

Table users {
  id int [pk, increment]                        
  username varchar [not null, unique]           // TÃªn Ä‘Äƒng nháº­p
  password varchar [not null]                   // Máº­t kháº©u (Ä‘Ã£ mÃ£ hÃ³a)
  role_id int [ref: > roles.id]                 // Vai trÃ²
  email varchar                                 // Email
  phone varchar                                 // Sá»‘ Ä‘iá»‡n thoáº¡i
  avatar_url varchar                            // áº¢nh Ä‘áº¡i diá»‡n
  status tinyint [default: 1]                   // 0:'inactive', 1:'active'
  created_at timestamp                          // NgÃ y táº¡o
  updated_at timestamp                          // Cáº­p nháº­t gáº§n nháº¥t
}

Table staffs {
  id int [pk, increment]                        
  user_id int [ref: > users.id]                 // TÃ i khoáº£n liÃªn káº¿t
  full_name varchar                             // Há» tÃªn
  dob date                                      // NgÃ y sinh
  gender tinyint                                // 1:nam, 2:ná»¯, 3:khÃ¡c
  position varchar                              // Chá»©c vá»¥
  department varchar                            // PhÃ²ng ban
  id_card varchar                               // CCCD/CMND
  address varchar                               // Äá»‹a chá»‰
  start_date date                               // NgÃ y báº¯t Ä‘áº§u lÃ m
  salary int                                    // LÆ°Æ¡ng
  status tinyint [default: 1]                   // 0:'nghá»‰', 1:'Ä‘ang lÃ m', 2:'nghá»‰ phÃ©p'
}

//////////////////////////////////////////////////////////////
// ðŸ”¹ CÆ¯ DÃ‚N & CÄ‚N Há»˜
//////////////////////////////////////////////////////////////
Table residents {
  id int [pk, increment]                        
  user_id int [ref: > users.id]                 // TÃ i khoáº£n liÃªn káº¿t
  full_name varchar                             // Há» tÃªn
  gender tinyint                                // 1:nam, 2:ná»¯, 3:khÃ¡c
  phone varchar                                 // Sá»‘ Ä‘iá»‡n thoáº¡i
  dob date                                      // NgÃ y sinh
  place_of_birth varchar                        // NÆ¡i sinh
  ethnicity varchar                             // DÃ¢n tá»™c
  occupation varchar                            // Nghá» nghiá»‡p
  hometown varchar                              // QuÃª quÃ¡n
  id_card varchar [unique]                      // CCCD
  household_no varchar                          // MÃ£ há»™ dÃ¢n
  status tinyint [default: 1]                   // 1:'Ä‘ang á»Ÿ', 2:'táº¡m váº¯ng', 3:'chuyá»ƒn Ä‘i'
  registered_at timestamp                       // NgÃ y Ä‘Äƒng kÃ½
}

Table apartment_types {
  id int [pk, increment]                        // MÃ£ loáº¡i cÄƒn há»™
  name varchar                                  // TÃªn loáº¡i (Studio, 1PN,...)
  description text                              // MÃ´ táº£
  layout_image varchar                          // áº¢nh sÆ¡ Ä‘á»“
}

Table apartments {
  id int [pk, increment]                        // MÃ£ cÄƒn há»™
  apartment_code varchar [not null, unique]     // MÃ£ Ä‘á»‹nh danh (vd: A101)
  building varchar                              // TÃ²a nhÃ 
  type_id int [ref: > apartment_types.id]       // Loáº¡i cÄƒn
  area float                                    // Diá»‡n tÃ­ch (m2)
  status tinyint                                // 0:'Trá»‘ng', 1:'Äang á»Ÿ'
  floor int                                     // Táº§ng
}

Table resident_apartment {
  id int [pk, increment]                        // LiÃªn káº¿t cÆ° dÃ¢n - cÄƒn há»™
  resident_id int [ref: > residents.id]
  apartment_id int [ref: > apartments.id]
  relationship varchar                          // Quan há»‡ (chá»§ há»™, ngÆ°á»i thÃ¢n) 
  is_living boolean [not null, default: 1]      // Äang á»Ÿ (1 ngÆ°á»i cÃ³ thá»ƒ chá»§ nhiá»u há»™ nhÆ°ng chá»‰ á»Ÿ 1 há»™)
  start_date date                               // NgÃ y báº¯t Ä‘áº§u
  end_date date                                 // NgÃ y káº¿t thÃºc
  created_at date                               // NgÃ y thÃªm
  updated_at date
}

Table vehicles {
  id int [pk, increment]
  apartment_id int [ref: > apartments.id]
  type tinyint                                  // 1:'car', 2:'motorbike', 3:'bicycle'
  brand varchar
  license_plate varchar [unique]
  color varchar
  status tinyint [default: 1]                   // 0:'inactive', 1:'active'
}

//////////////////////////////////////////////////////////////
// ðŸ”¹ Äá»¢T THU
//////////////////////////////////////////////////////////////
Table collection_periods {
  id int [pk, increment]
  name varchar
  type tinyint                                  // 1:'monthly', 2:'quarterly', 3:'yearly', 0:'custom'
  start_date date
  end_date date
  description text
  created_at timestamp
  created_by int [ref: > users.id]
  status tinyint [default: 1]                   // 0:'closed', 1:'open'
}

//////////////////////////////////////////////////////////////
// ðŸ”¹ Dá»ŠCH Vá»¤ & ÄÄ‚NG KÃ
//////////////////////////////////////////////////////////////
Table services {
  id int [pk, increment]
  name varchar
  description text
  price int
  unit varchar                                  // thÃ¡ng, lÆ°á»£t, m2, ngÆ°á»i
}

Table service_registrations {
  id int [pk, increment]
  apartment_id int [ref: > apartments.id]
  service_id int [ref: > services.id]
  start_date date
  end_date date
  status tinyint [default: 1]                   // 0:'inactive', 1:'active'
}

//////////////////////////////////////////////////////////////
// ðŸ”¹ HÃ“A ÄÆ N & THANH TOÃN
//////////////////////////////////////////////////////////////
Table invoices {
  id int [pk, increment]
  apartment_id int [ref: > apartments.id]
  period_id int [ref: > collection_periods.id]
  total_amount bigint
  status tinyint [default: 0]                    // 0:'unpaid', 1:'paid', 2:'overdue', 3:'cancelled'
  created_at timestamp
  created_by int [ref: > users.id]
  note text
}

Table invoice_items {
  id int [pk, increment]                        // MÃ£ chi tiáº¿t hÃ³a Ä‘Æ¡n
  invoice_id int [ref: > invoices.id]           // MÃ£ hÃ³a Ä‘Æ¡n
  service_id int [ref: > services.id]           // MÃ£ dá»‹ch vá»¥
  quantity int                                  // Sá»‘ lÆ°á»£ng
  unit_price int                                // ÄÆ¡n giÃ¡
  amount int                                    // ThÃ nh tiá»n (quantity * unit_price)
  note text                                     // Ghi chÃº
  created_at timestamp                          // NgÃ y táº¡o
  updated_at timestamp                          // NgÃ y cáº­p nháº­t
}

Table payments {
  id int [pk, increment]
  invoice_id int [ref: > invoices.id]
  resident_id int [ref: > residents.id]
  method varchar
  amount bigint
  paid_at timestamp
  transaction_code varchar
}

Table account_balances {
  id int [pk, increment]
  apartment_id int [ref: > apartments.id]
  balance int [default: 0]
  last_update timestamp
}

//////////////////////////////////////////////////////////////
// ðŸ”¹ THIáº¾T Bá»Š & Báº¢O TRÃŒ
//////////////////////////////////////////////////////////////
Table work_types {
  id int [pk, increment]                        // MÃ£ loáº¡i cÃ´ng viá»‡c
  name varchar                                  // Äiá»‡n, NÆ°á»›c, XÃ¢y dá»±ng, Cáº£nh quan, Thang mÃ¡y...
  description text                              // MÃ´ táº£
}

Table maintenance_requests {
  id int [pk, increment]                       
  resident_id int [ref: > residents.id]         // CÆ° dÃ¢n yÃªu cáº§u
  apartment_id int [ref: > apartments.id, null] // Null náº¿u lÃ  sá»± cá»‘ cÃ´ng cá»™ng
  location varchar                              // MÃ´ táº£ vá»‹ trÃ­ náº¿u khÃ´ng á»Ÿ trong cÄƒn há»™ (vd: "HÃ nh lang táº§ng 5", "Sáº£nh A")
  title varchar                                 // TiÃªu Ä‘á» yÃªu cáº§u
  description text                              // MÃ´ táº£ chi tiáº¿t
  images json                                   // Danh sÃ¡ch áº£nh (URL/path)
  status tinyint [default: 0]                   // 0:'pending', 1:'done', 2:'cancelled', 3:'In Progress'
  result text                                   // Káº¿t quáº£ xá»­ lÃ½
  work_type_id int [ref: > work_types.id]       // MÃ£ loáº¡i cÃ´ng viá»‡c
  assigned_to int [ref: > staffs.id]            // NhÃ¢n viÃªn Ä‘Æ°á»£c phÃ¢n cÃ´ng
  created_at timestamp                          // NgÃ y táº¡o
  resolved_at timestamp                         // NgÃ y hoÃ n thÃ nh
}

Table maintenance_schedules {
  id int [pk, increment]                       
  title varchar                         // TÃªn Ä‘á»£t báº£o trÃ¬ (Hiá»ƒn thá»‹ lÃªn thÃ´ng bÃ¡o)
  description text                      // Chi tiáº¿t cÃ´ng viá»‡c (vd: "Tra dáº§u, kiá»ƒm tra cÃ¡p...")
  maintenance_object varchar            // Äá»‘i tÆ°á»£ng cáº§n báº£o trÃ¬ (vd: "Thang mÃ¡y", "Há»“ bÆ¡i", "MÃ¡y phÃ¡t Ä‘iá»‡n")
  location varchar                      // Vá»‹ trÃ­ (vd: "TÃ²a A", "ToÃ n khu", "Táº§ng háº§m")
  start_at timestamp                            // Thá»i gian báº¯t Ä‘áº§u
  end_at timestamp                              // Thá»i gian káº¿t thÃºc
  assigned_to int [ref: > staffs.id]            // NhÃ¢n viÃªn thá»±c hiá»‡n
  status tinyint [default: 0]                   // 0:'scheduled', 1:'completed'
  created_at timestamp
  created_by int [ref: > users.id]
}

//////////////////////////////////////////////////////////////
// ðŸ”¹ THÃ”NG BÃO & TIN Tá»¨C
//////////////////////////////////////////////////////////////
Table notifications {
  id int [pk, increment]
  title varchar
  content text
  category tinyint                              // 1:'system', 2:'event', 3:'fee', 4:'maintenance', 5:'other'
  created_at timestamp
  created_by int [ref: > users.id]
}

Table notification_receivers {
  id int [pk, increment]
  notification_id int [ref: > notifications.id]
  user_id int [ref: > users.id]
  is_read boolean
  read_at timestamp
}

Table news {
  id int [pk, increment]
  title varchar
  content text
  created_at timestamp
  category int                                  // event, thÃ´ng bÃ¡o, hÆ°á»›ng dáº«n, tin ná»™i khu
}

//////////////////////////////////////////////////////////////
// ðŸ”¹ BÃO CÃO, Dá»° ÃN & CÆ  Sá»ž Váº¬T CHáº¤T
//////////////////////////////////////////////////////////////
Table financial_reports {
  id int [pk, increment]
  title varchar
  period_id int [ref: > collection_periods.id]
  total_income bigint
  total_expense bigint
  created_at timestamp
}

Table projects {
  id int [pk, increment]
  name varchar
  description text
  image_url varchar
}

Table facilities {
  id int [pk, increment]
  name varchar
  description text
  image_url varchar
}

//////////////////////////////////////////////////////////////
// ðŸ”¹ LIÃŠN Há»† / THÃ”NG TIN CHUNG CÆ¯
//////////////////////////////////////////////////////////////
Table contacts {
  id int [pk, increment]
  email varchar
  phone varchar
  address varchar
  map_embed_url text
}
