//////////////////////////////////////////////////////////////
// ðŸ”¹ Báº¢NG QUáº¢N LÃ NGÆ¯á»œI DÃ™NG & PHÃ‚N QUYá»€N
//////////////////////////////////////////////////////////////
Table roles {
  id int [pk, increment]                        // MÃ£ vai trÃ²
  name varchar                                  // TÃªn vai trÃ² (Admin, CÆ° dÃ¢n, Thu ngÃ¢n,...)
  description text                              // MÃ´ táº£ chá»©c nÄƒng / quyá»n háº¡n
}

Table users {
  id int [pk, increment]                        // MÃ£ ngÆ°á»i dÃ¹ng
  username varchar [not null, unique]           // TÃªn Ä‘Äƒng nháº­p
  password varchar [not null]                   // Máº­t kháº©u (Ä‘Ã£ mÃ£ hÃ³a)
  role_id int [ref: > roles.id]                 // Vai trÃ²
  email varchar                                 // Email
  phone varchar                                 // Sá»‘ Ä‘iá»‡n thoáº¡i
  avatar_url varchar                            // áº¢nh Ä‘áº¡i diá»‡n
  status tinyint [default: 1]                   // 0:'inactive', 1:'active'
  created_at timestamp                          // NgÃ y táº¡o
  updated_at timestamp                          // Cáº­p nháº­t gáº§n nháº¥t
}

Table staffs {
  id int [pk, increment]                        // MÃ£ nhÃ¢n viÃªn
  user_id int [ref: > users.id]                 // TÃ i khoáº£n liÃªn káº¿t
  full_name varchar                             // Há» tÃªn
  dob date                                      // NgÃ y sinh
  gender tinyint                                // 1:nam, 2:ná»¯, 3:khÃ¡c
  position varchar                              // Chá»©c vá»¥
  department varchar                            // PhÃ²ng ban
  id_card varchar                               // CCCD/CMND
  address varchar                               // Äá»‹a chá»‰
  start_date date                               // NgÃ y báº¯t Ä‘áº§u lÃ m
  salary int                                    // LÆ°Æ¡ng
  status tinyint [default: 1]                   // 0:'nghá»‰', 1:'Ä‘ang lÃ m', 2:'nghá»‰ phÃ©p'
}

//////////////////////////////////////////////////////////////
// ðŸ”¹ CÆ¯ DÃ‚N & CÄ‚N Há»˜
//////////////////////////////////////////////////////////////
Table residents {
  id int [pk, increment]                        // MÃ£ cÆ° dÃ¢n
  user_id int [ref: > users.id]                 // TÃ i khoáº£n liÃªn káº¿t
  full_name varchar                             // Há» tÃªn
  gender tinyint                                // 1:nam, 2:ná»¯, 3:khÃ¡c
  phone varchar                                 // Sá»‘ Ä‘iá»‡n thoáº¡i
  dob date                                      // NgÃ y sinh
  place_of_birth varchar                        // NÆ¡i sinh
  ethnicity varchar                             // DÃ¢n tá»™c
  occupation varchar                            // Nghá» nghiá»‡p
  hometown varchar                              // QuÃª quÃ¡n
  id_card varchar [unique]                      // CCCD
  household_no varchar                          // MÃ£ há»™ dÃ¢n
  status tinyint [default: 1]                   // 1:'Ä‘ang á»Ÿ', 2:'táº¡m váº¯ng', 3:'chuyá»ƒn Ä‘i'
  registered_at timestamp                       // NgÃ y Ä‘Äƒng kÃ½
}

Table apartment_types {
  id int [pk, increment]                        // MÃ£ loáº¡i cÄƒn há»™
  name varchar                                  // TÃªn loáº¡i (Studio, 1PN,...)
  description text                              // MÃ´ táº£
  layout_image varchar                          // áº¢nh sÆ¡ Ä‘á»“
}

Table apartments {
  id int [pk, increment]                        // MÃ£ cÄƒn há»™
  apartment_code varchar [not null, unique]     // MÃ£ Ä‘á»‹nh danh (vd: A101)
  building varchar                              // TÃ²a nhÃ 
  type_id int [ref: > apartment_types.id]       // Loáº¡i cÄƒn
  area float                                    // Diá»‡n tÃ­ch (m2)
  status tinyint                                // 0:'Trá»‘ng', 1:'Äang á»Ÿ'
  floor int                                     // Táº§ng
}

Table resident_apartment {
  id int [pk, increment]                        // LiÃªn káº¿t cÆ° dÃ¢n - cÄƒn há»™
  resident_id int [ref: > residents.id]
  apartment_id int [ref: > apartments.id]
  relationship varchar                          // Quan há»‡ (chá»§ há»™, ngÆ°á»i thÃ¢n) 
  is_living boolean [not null, default: 1]      // Äang á»Ÿ (1 ngÆ°á»i cÃ³ thá»ƒ chá»§ nhiá»u há»™ nhÆ°ng chá»‰ á»Ÿ 1 há»™)
  start_date date                               // NgÃ y báº¯t Ä‘áº§u
  end_date date                                 // NgÃ y káº¿t thÃºc
  create_at date                                // NgÃ y thÃªm
}

Table vehicles {
  id int [pk, increment]
  apartment_id int [ref: > apartments.id]
  type tinyint                                  // 1:'car', 2:'motorbike', 3:'bicycle'
  brand varchar
  license_plate varchar [unique]
  color varchar
  status tinyint [default: 1]                   // 0:'inactive', 1:'active'
}

//////////////////////////////////////////////////////////////
// ðŸ”¹ Äá»¢T THU
//////////////////////////////////////////////////////////////
Table collection_periods {
  id int [pk, increment]
  name varchar
  type tinyint                                  // 1:'monthly', 2:'quarterly', 3:'yearly', 0:'custom'
  start_date date
  end_date date
  description text
  created_at timestamp
  created_by int [ref: > users.id]
  status tinyint [default: 1]                   // 0:'closed', 1:'active'
}

//////////////////////////////////////////////////////////////
// ðŸ”¹ Dá»ŠCH Vá»¤ & ÄÄ‚NG KÃ
//////////////////////////////////////////////////////////////
Table services {
  id int [pk, increment]
  name varchar
  description text
  price int
  unit varchar                                  // thÃ¡ng, lÆ°á»£t, m2, ngÆ°á»i
}

Table service_registrations {
  id int [pk, increment]
  apartment_id int [ref: > apartments.id]
  service_id int [ref: > services.id]
  start_date date
  end_date date
  status tinyint [default: 1]                   // 0:'inactive', 1:'active'
}

//////////////////////////////////////////////////////////////
// ðŸ”¹ HÃ“A ÄÆ N & THANH TOÃN
//////////////////////////////////////////////////////////////
Table invoices {
  id int [pk, increment]
  apartment_id int [ref: > apartments.id]
  period_id int [ref: > collection_periods.id]
  total_amount bigint
  status tinyint [default: 0]                    // 0:'unpaid', 1:'paid', 2:'overdue', 3:'cancelled'
  created_at timestamp
  created_by int [ref: > users.id]
  note text
}

Table payments {
  id int [pk, increment]
  invoice_id int [ref: > invoices.id]
  resident_id int [ref: > residents.id]
  method varchar
  amount bigint
  paid_at timestamp
  transaction_code varchar
}

Table account_balances {
  id int [pk, increment]
  apartment_id int [ref: > apartments.id]
  balance int [default: 0]
  last_update timestamp
}

//////////////////////////////////////////////////////////////
// ðŸ”¹ THIáº¾T Bá»Š & Báº¢O TRÃŒ
//////////////////////////////////////////////////////////////
Table equipments {
  id int [pk, increment]
  name varchar
  location varchar
  status tinyint [default: 1]                   // 0:'inactive', 1:'active', 2:'maintenance', 3:'broken'
  last_maintenance timestamp
}

Table maintenance_requests {
  id int [pk, increment]
  equipment_id int [ref: > equipments.id]
  resident_id int [ref: > residents.id]
  description text
  priority tinyint                              // 1:'low', 2:'medium', 3:'high', 4:'urgent'
  status tinyint [default: 0]                   // 0:'pending', 1:'in_progress', 2:'done', 3:'cancelled'
  created_at timestamp
  assigned_to int [ref: > staffs.id]
  resolved_at timestamp
}

Table maintenance_schedules {
  id int [pk, increment]
  equipment_id int [ref: > equipments.id]
  start_at timestamp
  end_at timestamp
  assigned_to int [ref: > staffs.id]
  description text
  status tinyint [default: 0]                   // 0:'scheduled', 1:'completed'
}

//////////////////////////////////////////////////////////////
// ðŸ”¹ THÃ”NG BÃO & TIN Tá»¨C
//////////////////////////////////////////////////////////////
Table notifications {
  id int [pk, increment]
  title varchar
  content text
  created_at timestamp
  created_by int [ref: > users.id]
  category tinyint                              // 1:'system', 2:'event', 3:'fee', 4:'maintenance', 5:'other'
}

Table notification_receivers {
  id int [pk, increment]
  notification_id int [ref: > notifications.id]
  resident_id int [ref: > residents.id]
  is_read boolean
  read_at timestamp
}

Table news {
  id int [pk, increment]
  title varchar
  content text
  created_at timestamp
  category int                                  // event, thÃ´ng bÃ¡o, hÆ°á»›ng dáº«n, tin ná»™i khu
}

//////////////////////////////////////////////////////////////
// ðŸ”¹ BÃO CÃO, Dá»° ÃN & CÆ  Sá»ž Váº¬T CHáº¤T
//////////////////////////////////////////////////////////////
Table financial_reports {
  id int [pk, increment]
  title varchar
  period_id int [ref: > collection_periods.id]
  total_income bigint
  total_expense bigint
  created_at timestamp
}

Table projects {
  id int [pk, increment]
  name varchar
  description text
  image_url varchar
}

Table facilities {
  id int [pk, increment]
  name varchar
  description text
  image_url varchar
}

//////////////////////////////////////////////////////////////
// ðŸ”¹ LIÃŠN Há»† / THÃ”NG TIN CHUNG CÆ¯
//////////////////////////////////////////////////////////////
Table contacts {
  id int [pk, increment]
  email varchar
  phone varchar
  address varchar
  map_embed_url text
}
